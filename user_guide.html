<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burnmouth - User Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Montserrat', sans-serif; }
        .sidebar-link.active {
            background-color: #eff6ff;
            color: #2563eb;
            border-right: 3px solid #2563eb;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Sidebar Navigation -->
    <nav class="fixed top-0 left-0 w-64 h-full bg-white border-r border-slate-200 z-50 overflow-y-auto">
        <div class="p-6 border-b border-slate-100">
            <h1 class="text-2xl font-extrabold text-slate-800 uppercase tracking-tight">Burnmouth</h1>
            <p class="text-xs text-slate-400 font-semibold mt-1">Geospatial Tool Kit</p>
        </div>
        <ul class="py-4 space-y-1">
            <li>
                <a href="#intro" class="sidebar-link block px-6 py-3 text-sm font-bold text-slate-600 hover:bg-slate-50 hover:text-blue-600 transition-colors">
                    Welcome & Privacy
                </a>
            </li>
            <li>
                <a href="#visualisation" class="sidebar-link block px-6 py-3 text-sm font-bold text-slate-600 hover:bg-slate-50 hover:text-blue-600 transition-colors">
                    Visualisation Styles
                </a>
            </li>
            <li>
                <a href="#timeline" class="sidebar-link block px-6 py-3 text-sm font-bold text-slate-600 hover:bg-slate-50 hover:text-blue-600 transition-colors">
                    Timeline Controls
                </a>
            </li>
            <li>
                <a href="#maptools" class="sidebar-link block px-6 py-3 text-sm font-bold text-slate-600 hover:bg-slate-50 hover:text-blue-600 transition-colors">
                    Map Tools
                </a>
            </li>
            <li>
                <a href="#analysis" class="sidebar-link block px-6 py-3 text-sm font-bold text-slate-600 hover:bg-slate-50 hover:text-blue-600 transition-colors">
                    Analytical Intelligence
                </a>
            </li>
            <li>
                <a href="#reporting" class="sidebar-link block px-6 py-3 text-sm font-bold text-slate-600 hover:bg-slate-50 hover:text-blue-600 transition-colors">
                    Reporting
                </a>
            </li>
        </ul>
        <div class="absolute bottom-0 w-full p-6 bg-slate-50 border-t border-slate-100">
            <p class="text-[10px] text-slate-400">¬© 2025 Burnmouth Documentation</p>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="ml-64 p-8 md:p-12 lg:p-16 max-w-5xl">
        
        <!-- Welcome & Privacy -->
        <section id="intro" class="mb-20 scroll-mt-8">
            <div class="bg-blue-600 text-white rounded-2xl p-8 mb-8 shadow-xl shadow-blue-200">
                <h2 class="text-3xl font-extrabold mb-4">Welcome to Burnmouth</h2>
                <p class="text-blue-100 text-sm leading-relaxed max-w-2xl">
                    Burnmouth is a client-side geospatial intelligence tool designed for the secure visualisation and analysis of sensitive location data. It transforms raw CSV data into interactive intelligence without ever sending your data to the cloud.
                </p>
            </div>

            <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                <svg class="w-6 h-6 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                Privacy & Data Security
            </h3>
            <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm">
                <p class="text-sm text-slate-600 mb-4">
                    Security is the core feature of Burnmouth. The application operates entirely within your browser's local memory.
                </p>
                <ul class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <li class="bg-slate-50 p-4 rounded-lg">
                        <strong class="block text-slate-800 text-xs uppercase tracking-wide mb-1">Local Processing</strong>
                        <p class="text-xs text-slate-500">Your CSV files are parsed by JavaScript on your machine. No data is uploaded to any server or database.</p>
                    </li>
                    <li class="bg-slate-50 p-4 rounded-lg">
                        <strong class="block text-slate-800 text-xs uppercase tracking-wide mb-1">Volatile Memory</strong>
                        <p class="text-xs text-slate-500">Refreshing the page or closing the tab instantly wipes all loaded data. Nothing is cached permanently.</p>
                    </li>
                    <li class="bg-slate-50 p-4 rounded-lg">
                        <strong class="block text-slate-800 text-xs uppercase tracking-wide mb-1">Network Traffic</strong>
                        <p class="text-xs text-slate-500">Internet connection is only used to fetch map tiles (visuals) and perform optional Postcode lookups.</p>
                    </li>
                </ul>
            </div>
        </section>

        <hr class="border-slate-100 mb-20">

        <!-- Visualisation Styles -->
        <section id="visualisation" class="mb-20 scroll-mt-8">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">Visualisation Styles</h2>
            <p class="text-sm text-slate-600 mb-8">Burnmouth offers five distinct ways to view your data, toggleable via the control panel.</p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Standard Views -->
                <div class="space-y-4">
                    <div class="flex items-start gap-4">
                        <div class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-xs">1</div>
                        <div>
                            <h4 class="font-bold text-slate-800 text-sm">Markers</h4>
                            <p class="text-xs text-slate-500 mt-1">Individual points for every data row. Best for small datasets to see exact locations.</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-4">
                        <div class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-xs">2</div>
                        <div>
                            <h4 class="font-bold text-slate-800 text-sm">Clusters</h4>
                            <p class="text-xs text-slate-500 mt-1">Groups nearby points into circles. The number inside indicates the count of events in that area.</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-4">
                        <div class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-xs">3</div>
                        <div>
                            <h4 class="font-bold text-slate-800 text-sm">Heatmap</h4>
                            <p class="text-xs text-slate-500 mt-1">Shows density of activity. Red areas indicate high frequency of events.</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-4">
                        <div class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-xs">4</div>
                        <div>
                            <h4 class="font-bold text-slate-800 text-sm">Path</h4>
                            <p class="text-xs text-slate-500 mt-1">Connects points sequentially based on time to visualise movement trajectories.</p>
                        </div>
                    </div>
                </div>

                <!-- 3D Cube -->
                <div class="bg-slate-900 rounded-xl p-6 text-white relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10">
                        <svg class="w-32 h-32" fill="currentColor" viewBox="0 0 24 24"><path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>
                    </div>
                    <h4 class="font-bold text-lg mb-2 flex items-center gap-2">
                        Space-Time Cube (3D)
                        <span class="text-[10px] bg-blue-500 px-2 py-0.5 rounded">Advanced</span>
                    </h4>
                    <p class="text-xs text-slate-400 mb-4 leading-relaxed">
                        Visualises time as the vertical (Y) axis. The bottom of the cube is the map; higher points occurred earlier in time (or later, depending on vertical scale configuration).
                    </p>
                    <div class="space-y-3">
                        <div class="flex items-center gap-3 text-xs">
                            <span class="w-6 h-6 rounded bg-slate-700 flex items-center justify-center">üñ±Ô∏è</span>
                            <span><strong>Right Click + Drag:</strong> Pan the camera</span>
                        </div>
                        <div class="flex items-center gap-3 text-xs">
                            <span class="w-6 h-6 rounded bg-slate-700 flex items-center justify-center">üîç</span>
                            <span><strong>Scroll Wheel:</strong> Zoom in/out</span>
                        </div>
                        <div class="flex items-center gap-3 text-xs">
                            <span class="w-6 h-6 rounded bg-slate-700 flex items-center justify-center">üïπÔ∏è</span>
                            <span><strong>On-Screen Joysticks:</strong> Use the corner UI controls to rotate the view.</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <hr class="border-slate-100 mb-20">

        <!-- Timeline -->
        <section id="timeline" class="mb-20 scroll-mt-8">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">Timeline Controls</h2>
            
            <div class="bg-white border border-slate-200 rounded-xl p-8 shadow-sm">
                <div class="mb-8">
                    <h4 class="text-sm font-bold text-slate-700 uppercase tracking-wide mb-2">The Slider</h4>
                    <p class="text-sm text-slate-600">
                        The dual-handle slider allows you to filter the dataset by time range. Drag the left handle to set the <strong>Start Time</strong> and the right handle for the <strong>End Time</strong>. The map updates in real-time.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="text-sm font-bold text-slate-700 uppercase tracking-wide mb-2">Playback Animation</h4>
                        <p class="text-xs text-slate-500 mb-3">Press the <strong>Play</strong> button to animate through your data over time.</p>
                        <ul class="text-xs text-slate-500 space-y-2">
                            <li>‚Ä¢ <strong>Speed Control:</strong> Adjust the playback speed using the slider below the play button.</li>
                            <li>‚Ä¢ <strong>Looping:</strong> The animation will automatically loop when it reaches the end of the timeline.</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-sm font-bold text-slate-700 uppercase tracking-wide mb-2">Auto-Snap</h4>
                        <div class="flex items-center gap-2 mb-2">
                            <span class="px-2 py-1 bg-slate-100 border border-slate-200 rounded text-xs font-bold text-slate-600">Auto-Snap: Off</span>
                        </div>
                        <p class="text-xs text-slate-500">
                            When enabled, the map camera (2D or 3D) will automatically pan to follow the center of activity as the animation plays.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <hr class="border-slate-100 mb-20">

        <!-- Map Tools -->
        <section id="maptools" class="mb-20 scroll-mt-8">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">Map Tools</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:border-blue-300 transition-colors">
                    <div class="text-2xl mb-3">üìç</div>
                    <h3 class="font-bold text-slate-800 text-sm mb-2">Tag Location</h3>
                    <p class="text-xs text-slate-500 leading-relaxed">
                        Manually mark significant locations. Click "Tag Location" in the toolbar or right-click anywhere on the map to drop a persistent marker with a custom label and color.
                    </p>
                </div>
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:border-blue-300 transition-colors">
                    <div class="text-2xl mb-3">üè∑Ô∏è</div>
                    <h3 class="font-bold text-slate-800 text-sm mb-2">Show Labels</h3>
                    <p class="text-xs text-slate-500 leading-relaxed">
                        Toggle this to display text labels next to every data point. <br><em class="text-slate-400">Note: Automatically limited to 500 labels to prevent clutter.</em>
                    </p>
                </div>
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:border-blue-300 transition-colors">
                    <div class="text-2xl mb-3">üìÆ</div>
                    <h3 class="font-bold text-slate-800 text-sm mb-2">Postcode Search</h3>
                    <p class="text-xs text-slate-500 leading-relaxed">
                        Enter a UK postcode in the top navigation bar to fly the map directly to that location. Useful for verifying intelligence against known addresses.
                    </p>
                </div>
                <!-- New Feature -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:border-blue-300 transition-colors">
                    <div class="text-2xl mb-3">‚õù</div>
                    <h3 class="font-bold text-slate-800 text-sm mb-2">Select Area</h3>
                    <p class="text-xs text-slate-500 leading-relaxed">
                        Switch to selection mode to drag a rectangle across the map. This instantly isolates the data points within that specific area for focused analysis.
                    </p>
                </div>
            </div>
        </section>

        <hr class="border-slate-100 mb-20">

        <!-- Analysis -->
        <section id="analysis" class="mb-20 scroll-mt-8">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">Analytical Intelligence</h2>
            <p class="text-sm text-slate-600 mb-8">Burnmouth includes automated engines to scan your data for patterns and significant locations.</p>

            <div class="space-y-6">
                <!-- Key Locations -->
                <div class="bg-slate-50 rounded-xl p-6 border border-slate-200">
                    <h3 class="text-lg font-bold text-slate-800 mb-4">Key Location Detector</h3>
                    <p class="text-sm text-slate-600 mb-4">
                        Scans your entire dataset for proximity to sensitive infrastructure. You can adjust the detection radius (in km) for each category.
                    </p>
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 text-center">
                        <div class="bg-white p-3 rounded border border-slate-200">
                            <div class="text-blue-600 font-bold text-xs uppercase mb-1">Hubs</div>
                            <span class="text-[10px] text-slate-400">Airports & Seaports</span>
                        </div>
                        <div class="bg-white p-3 rounded border border-slate-200">
                            <div class="text-green-600 font-bold text-xs uppercase mb-1">Rail</div>
                            <span class="text-[10px] text-slate-400">Railway Stations</span>
                        </div>
                        <div class="bg-white p-3 rounded border border-slate-200">
                            <div class="text-rose-600 font-bold text-xs uppercase mb-1">Prisons</div>
                            <span class="text-[10px] text-slate-400">HMP Facilities</span>
                        </div>
                        <div class="bg-white p-3 rounded border border-slate-200">
                            <div class="text-purple-600 font-bold text-xs uppercase mb-1">Services</div>
                            <span class="text-[10px] text-slate-400">Motorway Services</span>
                        </div>
                        <div class="bg-white p-3 rounded border border-slate-200">
                            <div class="text-teal-600 font-bold text-xs uppercase mb-1">Misc</div>
                            <span class="text-[10px] text-slate-400">Hospitals, Stadiums</span>
                        </div>
                        <div class="bg-white p-3 rounded border border-slate-200">
                            <div class="text-cyan-600 font-bold text-xs uppercase mb-1">Maritime</div>
                            <span class="text-[10px] text-slate-400">Harbours & Marinas</span>
                        </div>
                    </div>
                </div>

                <!-- Co-location -->
                <div class="bg-cyan-50 rounded-xl p-6 border border-cyan-100">
                    <h3 class="text-lg font-bold text-cyan-900 mb-2">Co-location Analysis</h3>
                    <p class="text-sm text-cyan-800 mb-4 max-w-3xl">
                        This engine identifies instances where two different entities (or an entity and a user tag) were in the same place at the same time.
                    </p>
                    <div class="flex flex-col md:flex-row gap-4">
                        <div class="bg-white/50 p-4 rounded-lg border border-cyan-200 flex-1">
                            <strong class="text-xs uppercase text-cyan-700 block mb-1">Inputs</strong>
                            <p class="text-xs text-slate-600">Select <strong>Entity A</strong> and <strong>Entity B</strong> (or a Tag).</p>
                        </div>
                        <div class="bg-white/50 p-4 rounded-lg border border-cyan-200 flex-1">
                            <strong class="text-xs uppercase text-cyan-700 block mb-1">Parameters</strong>
                            <p class="text-xs text-slate-600">Define the <strong>Distance</strong> (km) and <strong>Time Window</strong> (minutes) that constitute a "meeting".</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <hr class="border-slate-100 mb-20">

        <!-- Reporting -->
        <section id="reporting" class="mb-24 scroll-mt-8">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">Reporting & Export</h2>
            <div class="bg-white border border-slate-200 rounded-xl overflow-hidden shadow-lg">
                <div class="bg-slate-800 p-4 flex items-center gap-3">
                    <div class="w-3 h-3 rounded-full bg-rose-500"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                    <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    <span class="text-xs font-mono text-slate-400 ml-2">Intelligence Report Builder</span>
                </div>
                <div class="p-8">
                    <ol class="relative border-l border-slate-200 ml-3 space-y-8">
                        <li class="mb-10 ml-6">
                            <span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-4 ring-white">
                                üì∏
                            </span>
                            <h3 class="font-bold text-slate-800">1. Capture Snapshots</h3>
                            <p class="text-sm text-slate-600 mt-1">
                                Set up your map view (Markers, Heatmap, or 3D) and click the <strong>Capture</strong> button. This saves the current view to the report builder.
                            </p>
                        </li>
                        <li class="mb-10 ml-6">
                            <span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-4 ring-white">
                                üìù
                            </span>
                            <h3 class="font-bold text-slate-800">2. Annotate</h3>
                            <p class="text-sm text-slate-600 mt-1">
                                Open the Report panel. You will see your snapshots. Add detailed analysis comments in the text box next to each image.
                            </p>
                        </li>
                        <li class="ml-6">
                            <span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-4 ring-white">
                                üìÑ
                            </span>
                            <h3 class="font-bold text-slate-800">3. Download PDF</h3>
                            <p class="text-sm text-slate-600 mt-1">
                                Click <strong>Download PDF</strong>. Burnmouth generates a professional document containing your snapshots, timestamps, and commentary, ready for dissemination.
                            </p>
                        </li>
                    </ol>
                </div>
            </div>
        </section>

    </main>

    <script>
        // Smooth scrolling for sidebar links and active state highlighting
        document.addEventListener('DOMContentLoaded', () => {
            // Handle initial hash
            if (window.location.hash) {
                const element = document.querySelector(window.location.hash);
                if (element) {
                    setTimeout(() => element.scrollIntoView({ behavior: 'smooth' }), 100);
                }
            }

            // Scroll spy for active link highlighting
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.sidebar-link');

            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if (scrollY >= (sectionTop - 150)) {
                        current = '#' + section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === current) {
                        link.classList.add('active');
                    }
                });
            });
        });
    </script>
</body>
</html>